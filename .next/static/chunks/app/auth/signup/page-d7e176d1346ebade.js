(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271,98],{4230:function(e,r,s){Promise.resolve().then(s.bind(s,1053))},1053:function(e,r,s){"use strict";s.r(r),s.d(r,{AuthForm:function(){return d}});var a=s(3827),t=s(4090),n=s(1126),o=s(7907),i=s(8792);let l=t.forwardRef((e,r)=>{let{className:s="",variant:t="primary",size:n="md",isLoading:o,children:i,...l}=e;return(0,a.jsxs)("button",{ref:r,className:"".concat("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-lg shadow-primary-500/30",secondary:"bg-secondary-100 text-secondary-900 hover:bg-secondary-200 focus:ring-secondary-500",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50 focus:ring-primary-500",ghost:"text-secondary-600 hover:bg-secondary-100 hover:text-secondary-900 focus:ring-secondary-500",glass:"glass-button text-white focus:ring-white/50"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[n]," ").concat(s),disabled:o||l.disabled,...l,children:[o?(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,i]})});l.displayName="Button";let c=t.forwardRef((e,r)=>{let{className:s="",label:t,error:n,...o}=e;return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:t}),(0,a.jsx)("input",{ref:r,className:"\n            w-full px-4 py-3 rounded-lg border bg-white/50 backdrop-blur-sm\n            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n            transition-all duration-200\n            ".concat(n?"border-red-300 focus:ring-red-500":"border-secondary-200 hover:border-secondary-300","\n            ").concat(o.disabled?"opacity-50 cursor-not-allowed":"","\n            ").concat(s,"\n          "),...o}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n})]})});function d(e){let{mode:r}=e,s=(0,o.useRouter)(),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(""),[h,f]=(0,t.useState)({email:"",password:"",confirmPassword:""}),x=async e=>{e.preventDefault(),u(!0),p("");try{if("signup"===r){if(h.password!==h.confirmPassword)throw Error("Passwords do not match");let e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,password:h.password})});if(!e.ok){let r=await e.json();throw Error(r.message||"Something went wrong")}let r=await (0,n.signIn)("credentials",{email:h.email,password:h.password,redirect:!1});if(null==r?void 0:r.error)throw Error(r.error);s.push("/dashboard")}else{let e=await (0,n.signIn)("credentials",{email:h.email,password:h.password,redirect:!1});if(null==e?void 0:e.error)throw Error("Invalid email or password");s.push("/dashboard")}}catch(e){p(e.message)}finally{u(!1)}};return(0,a.jsxs)("div",{className:"w-full max-w-md p-8 rounded-2xl glass-panel",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-primary-900 mb-2",children:"signin"===r?"Welcome Back":"Begin Your Journey"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"signin"===r?"Continue your conversation with your inner self":"Create an account to start your reflection journey"})]}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,a.jsx)(c,{label:"Email Address",type:"email",placeholder:"you@example.com",value:h.email,onChange:e=>f({...h,email:e.target.value}),required:!0}),(0,a.jsx)(c,{label:"Password",type:"password",placeholder:"••••••••",value:h.password,onChange:e=>f({...h,password:e.target.value}),required:!0}),"signup"===r&&(0,a.jsx)(c,{label:"Confirm Password",type:"password",placeholder:"••••••••",value:h.confirmPassword,onChange:e=>f({...h,confirmPassword:e.target.value}),required:!0}),m&&(0,a.jsx)("div",{className:"p-3 rounded-lg bg-red-50 text-red-600 text-sm text-center",children:m}),(0,a.jsx)(l,{type:"submit",className:"w-full",isLoading:d,children:"signin"===r?"Sign In":"Create Account"})]}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-secondary-600",children:"signin"===r?(0,a.jsxs)(a.Fragment,{children:["Don't have an account?"," ",(0,a.jsx)(i.default,{href:"/auth/signup",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]}):(0,a.jsxs)(a.Fragment,{children:["Already have an account?"," ",(0,a.jsx)(i.default,{href:"/auth/signin",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})})]})}c.displayName="Input"}},function(e){e.O(0,[250,456,971,69,744],function(){return e(e.s=4230)}),_N_E=e.O()}]);